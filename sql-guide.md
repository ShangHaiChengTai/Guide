# SQL Guide

---

## SQL规范

---

## 文档目录

1. [基本规范](#1-基本规范)
2. [性能约束](#2-性能约束)

---

## 1 基本规范

## 1.1. 数据库

- 名称使用英文全名，并且采用小写和下划线分割的规则；

- 如没有特殊的需求，尽量采用utf8作为默认字符集。

- 坚持最小权限控制原则。

- 设计数据库时遵循范式化设计，至少达到第三范式，特殊情况下可以让极少数的字段冗余。

### 1.2. 数据表

- 必须使用 `项目名_模块名_表名` 来作为数据表的完整名称，且必须使用英文全名，并且采用小写和下划线分割的规则，如果真的太长需要缩写，则采用首4个字母，尽量做到语义要明确，不能让人产生困惑。

- **必须**要有表注释。

- 如非必要，采用utf8字符集。

- 如没有特殊需求，尽量采用innodb引擎。

- 每个表都应该有一个自增主键id。

### 1.3. 字段

- 字段名采用规范的英文名称，全部采用小写格式，并且以下划线”_”分割。 如 `user_id`、`room_type`。

- 每个字段**必须**要有注释。

- 很多表的字段是类似的，如时间字段（创建时间，最后一次修改时间等），此时每一个表的命名都应该一致且类型也应该一致，如不能这个表使用int类型，那个表使用timestamp类型，另外的表又使用datetime类型，这个表命名created_at，那个表命名create_time。

---

## 2 性能约束

数据库的性能优化是个很庞大的话题，特别指出的是在设计数据库和查询时要时刻注意性能，因为大多数情况下，出现性能瓶颈的问题都在数据库的读写上，这方面的知识请查看相关的文章和书籍。

##

表名：
1. 必须以纯小写字母+_形式命名
 
2. 最好以ap,mn,nv等开头
 
3. 必须以复数形式结尾
 
4. 字段长度不能超过3个单词长度。
 
5. 单个单词长度超过10个字母的应当使用缩写。
 
6. 用英文，禁止用汉语拼音。
 
字段名：
1. 字段名称必须以纯小写字母+_形式命名。
 
2. 必须有id字段，且为主键。
 
3. 必须有create_time字段，字段类型必须为timestamp，字段默认值必须为CURRENT_TIMESTAMP。
 
4. 必须有update_time字段，字段类型必须为timestamp，字段默认值必须为CURRENT_TIMESTAMP，字段必须是以当前时间戳自动更新。

5. 必须有create_user字段，字段类型必须为int，字段长度必须设置为11。
 
6. 必须有update_user字段，字段类型必须为int，字段长度必须设置为11。
 
7. 必须有del_flg字段，字段类型必须为tinyint，默认是必须设置为0。
 
8. 字段长度不能超过3个单词长度。
 
9. 单个单词长度超过10个字母的应当使用缩写。
 
10. 禁止使用mysql的关键字作为字段名。
 
6. timestamp、image、datetime、smalldatetime、uniqueidentifier、binary、sql_variant、binary、varbinary外，必须有默认值。
 
7. 字符型的默认值为一个空字符值串’’
 
8. 数值型的默认值为数值0(具体看业务可以用其他数值)
 
9. 系统中所有逻辑型中数值0表示为“假”；数值1表示为“真”。
